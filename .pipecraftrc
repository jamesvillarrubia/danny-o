{
  "ciProvider": "github",
  "mergeStrategy": "fast-forward",
  "initialBranch": "develop",
  "finalBranch": "main",
  "requireConventionalCommits": true,
  "branchFlow": [
    {
      "name": "develop",
      "type": "development",
      "deploy": {
        "environment": "development",
        "provider": "flyio",
        "app": "danny-tasks-api-dev"
      }
    },
    {
      "name": "main",
      "type": "production",
      "deploy": {
        "environment": "production",
        "provider": "flyio",
        "app": "danny-tasks-api-prod"
      }
    }
  ],
  "domains": {
    "api": {
      "paths": ["api/**"],
      "type": "backend",
      "workingDirectory": "api",
      "testCommand": "pnpm lint && pnpm test",
      "buildCommand": "pnpm build",
      "deployCommand": "flyctl deploy --app $FLY_APP --remote-only",
      "continueOnError": false
    },
    "web": {
      "paths": ["web/**"],
      "type": "frontend",
      "workingDirectory": "web",
      "testCommand": "pnpm lint && pnpm test",
      "buildCommand": "pnpm build",
      "continueOnError": true
    },
    "extension": {
      "paths": ["extension/**"],
      "type": "extension",
      "workingDirectory": "extension",
      "testCommand": "pnpm lint && pnpm test",
      "buildCommand": "pnpm build",
      "continueOnError": true
    }
  },
  "environments": {
    "development": {
      "branch": "develop",
      "secrets": ["FLY_API_TOKEN"]
    },
    "production": {
      "branch": "main",
      "secrets": ["FLY_API_TOKEN"]
    }
  }
}
