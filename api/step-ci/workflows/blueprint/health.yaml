# Health Endpoints Blueprint Tests
# 
# Tests all health check endpoints for availability and correct response format.

version: "1.1"
name: Health Blueprint

env:
  host: ${{ env.API_HOST }}

tests:
  health_overall:
    name: Overall Health Check
    steps:
      - name: GET /health - 200 OK
        http:
          url: ${{ env.host }}/../health
          method: GET
          timeout: ${{ env.TIMEOUT }}
          check:
            status: 200
            jsonpath:
              $.status: ok

  health_database:
    name: Database Health Check
    steps:
      - name: GET /health/db - 200 OK
        http:
          url: ${{ env.host }}/../health/db
          method: GET
          timeout: ${{ env.TIMEOUT }}
          check:
            status: 200

  health_readiness:
    name: Readiness Probe
    steps:
      - name: GET /health/ready - 200 OK
        http:
          url: ${{ env.host }}/../health/ready
          method: GET
          timeout: ${{ env.TIMEOUT }}
          check:
            status: 200

  health_liveness:
    name: Liveness Probe
    steps:
      - name: GET /health/live - 200 OK
        http:
          url: ${{ env.host }}/../health/live
          method: GET
          timeout: ${{ env.TIMEOUT }}
          check:
            status: 200

